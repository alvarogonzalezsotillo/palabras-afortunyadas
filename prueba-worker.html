<!DOCTYPE html>
<html>
    <head>
        <title>prueba-worker</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </head>
    <body>
        <div id="root">
        </div>

        
        <script type="text/javascript">
         function log(msg){
             console.log(msg);
             document.getElementById("root").innerHTML += ("<pre>" + msg + "</pre>");
         }
         let visibleFromScala = {}
         log( "Creo el worker");
         visibleFromScala.worker = new Worker("./palabras/.js/src/main/js/prueba-worker.js");

         visibleFromScala.worker.onmessage = function(msg){
             let m = msg.data
             log( "Recibido en html del worker:" + m )
             if( m == "Corpus cargado" ){
                 enviar( "Mantenerse" );
                 enviar("buenavista");
                 enviar("acabado");
                 enviar("camión");

             }
             else{
                 log( "Ya hemos encontrado las coincidencias:" + m );
             }
         }

         function enviar(p){
             log( "Envío palabra: " + p )
             visibleFromScala.worker.postMessage(p);
         }
        </script>

    </body>
</html>
